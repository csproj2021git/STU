{"ast":null,"code":"import { SET_POLLS, SET_CURRENT_USER } from '../actionsTypes';\nimport { addError, removeError } from './error';\nimport api from '../../services/api';\nexport const setPolls = polls => ({\n  type: SET_POLLS,\n  polls\n});\nexport const setCurrentPoll = poll => ({\n  type: SET_CURRENT_POLL,\n  poll\n});\nexport const getPolls = () => {\n  return async dispatch => {\n    try {\n      const polls = await api.call('get', 'polls');\n      dispatch(setPolls(polls));\n      dispatch(removeError());\n    } catch (err) {\n      const error = err.response.data;\n      dispatch(addError(error.err));\n    }\n  };\n};\nexport const getUserPolls = () => {\n  return async dispatch => {\n    try {\n      const polls = await api.call('get', 'polls/user');\n      dispatch(setPolls(polls));\n      dispatch(removeError());\n    } catch (err) {\n      const error = err.response.data;\n      dispatch(addError(error.err));\n    }\n  };\n};\nexport const createPoll = data => {\n  return async dispatch => {\n    try {\n      const poll = await api.call('post', 'polls', data);\n      dispatch(setCurrentPoll(poll));\n      dispatch(removeError());\n    } catch (err) {\n      const error = err.response.data;\n      dispatch(addError(error.err));\n    }\n  };\n};\nexport const getCurrentPoll = id => {\n  return async dispatch => {\n    try {\n      const poll = await api.call('get', `polls/${id}`);\n      dispatch(setCurrentPoll(poll));\n      dispatch(removeError());\n    } catch (err) {\n      const error = err.response.data;\n      dispatch(addError(error.err));\n    }\n  };\n};\nexport const vote = (id, data) => {\n  return async dispatch => {\n    try {\n      const poll = await api.call('post', `polls/${id}`, data);\n      dispatch(setCurrentPoll(poll));\n      dispatch(removeError());\n    } catch (err) {\n      const error = err.response.data;\n      dispatch(addError(error.err));\n    }\n  };\n};","map":{"version":3,"names":["SET_POLLS","SET_CURRENT_USER","addError","removeError","api","setPolls","polls","type","setCurrentPoll","poll","SET_CURRENT_POLL","getPolls","dispatch","call","err","error","response","data","getUserPolls","createPoll","getCurrentPoll","id","vote"],"sources":["C:/Users/abronshtein/Desktop/Code/STU/StuVoteApp/client/src/store/actions/polls.js"],"sourcesContent":["import {SET_POLLS,SET_CURRENT_USER} from '../actionsTypes'\r\nimport {addError, removeError} from './error'\r\nimport api from '../../services/api'\r\n\r\nexport const setPolls = polls => ({\r\n    type: SET_POLLS,\r\n    polls\r\n})\r\n\r\nexport const setCurrentPoll = poll => ({\r\n    type: SET_CURRENT_POLL,\r\n    poll\r\n})\r\n\r\nexport const getPolls = () => {\r\n    return async dispatch => {\r\n        try{\r\n            const polls = await api.call('get', 'polls')\r\n            dispatch(setPolls(polls))\r\n            dispatch(removeError())\r\n        }catch (err){\r\n            const error = err.response.data\r\n            dispatch(addError(error.err))\r\n        }\r\n    }\r\n}\r\n\r\nexport const getUserPolls = () => {\r\n    return async dispatch => {\r\n        try{\r\n            const polls = await api.call('get', 'polls/user')\r\n            dispatch(setPolls(polls))\r\n            dispatch(removeError())\r\n        }catch (err){\r\n            const error = err.response.data\r\n            dispatch(addError(error.err))\r\n        }\r\n    }\r\n}\r\n\r\nexport const createPoll = (data) => {\r\n    return async dispatch => {\r\n        try{\r\n            const poll = await api.call('post', 'polls', data)\r\n            dispatch(setCurrentPoll(poll))\r\n            dispatch(removeError())\r\n        }catch (err){\r\n            const error = err.response.data\r\n            dispatch(addError(error.err))\r\n        }\r\n    }\r\n}\r\n\r\nexport const getCurrentPoll = (id) => {\r\n    return async dispatch => {\r\n        try{\r\n            const poll = await api.call('get', `polls/${id}`)\r\n            dispatch(setCurrentPoll(poll))\r\n            dispatch(removeError())\r\n        }catch (err){\r\n            const error = err.response.data\r\n            dispatch(addError(error.err))\r\n        }\r\n    }\r\n}\r\n\r\nexport const vote = (id,data) => {\r\n    return async dispatch => {\r\n        try{\r\n            const poll = await api.call('post', `polls/${id}`, data)\r\n            dispatch(setCurrentPoll(poll))\r\n            dispatch(removeError())\r\n        }catch (err){\r\n            const error = err.response.data\r\n            dispatch(addError(error.err))\r\n        }\r\n    }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}