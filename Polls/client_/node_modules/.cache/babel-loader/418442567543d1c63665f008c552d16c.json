{"ast":null,"code":"import { addError, removeError } from './error';\nimport { SET_CURRENT_USER } from '../actionsTypes';\nimport api from '../../services/api';\nexport const setCurrentUser = user => ({\n  type: SET_CURRENT_USER,\n  user\n});\nexport const setToken = token => {\n  api.setToken(token);\n};\nexport const authUser = (path, data) => {\n  return async dispatch => {\n    try {\n      const {\n        token,\n        ...user\n      } = await api.call('post', `auth/${path}`, data);\n      localStorage.setItem('jwtToken', token);\n      api.setToken(token);\n      dispatch(setCurrentUser(user));\n      dispatch(removeError());\n    } catch (err) {\n      const {\n        error\n      } = err.response.data;\n      dispatch(addError(error));\n    }\n  };\n};\nexport const logout = () => {\n  return dispatch => {\n    localStorage.clear();\n    api.setToken(null);\n    dispatch(setCurrentUser({}));\n    dispatch(removeError());\n  };\n};","map":{"version":3,"names":["addError","removeError","SET_CURRENT_USER","api","setCurrentUser","user","type","setToken","token","authUser","path","data","dispatch","call","localStorage","setItem","err","error","response","logout","clear"],"sources":["C:/Users/abronshtein/Desktop/Code/STU/StuVoteApp/client/src/store/actions/auth.js"],"sourcesContent":["import {addError, removeError} from './error'\r\nimport {SET_CURRENT_USER} from '../actionsTypes'\r\nimport api from '../../services/api'\r\n\r\nexport const setCurrentUser = user => ({\r\n    type: SET_CURRENT_USER,\r\n    user\r\n})\r\n\r\nexport const setToken = token =>{\r\n    api.setToken(token)\r\n}\r\n\r\nexport const authUser = (path, data) => {\r\n    return async dispatch => {\r\n        try{\r\n            const {token, ...user} = await api.call('post',`auth/${path}`,data)\r\n            localStorage.setItem('jwtToken', token)\r\n            api.setToken(token)\r\n            dispatch(setCurrentUser(user))\r\n            dispatch(removeError())\r\n        } catch(err){\r\n            const {error} = err.response.data\r\n            dispatch(addError(error))\r\n        }\r\n    }\r\n}\r\n\r\nexport const logout = () => {\r\n    return dispatch => {\r\n        localStorage.clear()\r\n        api.setToken(null)\r\n        dispatch(setCurrentUser({}))\r\n        dispatch(removeError())\r\n    }\r\n}"],"mappings":"AAAA,SAAQA,QAAR,EAAkBC,WAAlB,QAAoC,SAApC;AACA,SAAQC,gBAAR,QAA+B,iBAA/B;AACA,OAAOC,GAAP,MAAgB,oBAAhB;AAEA,OAAO,MAAMC,cAAc,GAAGC,IAAI,KAAK;EACnCC,IAAI,EAAEJ,gBAD6B;EAEnCG;AAFmC,CAAL,CAA3B;AAKP,OAAO,MAAME,QAAQ,GAAGC,KAAK,IAAG;EAC5BL,GAAG,CAACI,QAAJ,CAAaC,KAAb;AACH,CAFM;AAIP,OAAO,MAAMC,QAAQ,GAAG,CAACC,IAAD,EAAOC,IAAP,KAAgB;EACpC,OAAO,MAAMC,QAAN,IAAkB;IACrB,IAAG;MACC,MAAM;QAACJ,KAAD;QAAQ,GAAGH;MAAX,IAAmB,MAAMF,GAAG,CAACU,IAAJ,CAAS,MAAT,EAAiB,QAAOH,IAAK,EAA7B,EAA+BC,IAA/B,CAA/B;MACAG,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCP,KAAjC;MACAL,GAAG,CAACI,QAAJ,CAAaC,KAAb;MACAI,QAAQ,CAACR,cAAc,CAACC,IAAD,CAAf,CAAR;MACAO,QAAQ,CAACX,WAAW,EAAZ,CAAR;IACH,CAND,CAME,OAAMe,GAAN,EAAU;MACR,MAAM;QAACC;MAAD,IAAUD,GAAG,CAACE,QAAJ,CAAaP,IAA7B;MACAC,QAAQ,CAACZ,QAAQ,CAACiB,KAAD,CAAT,CAAR;IACH;EACJ,CAXD;AAYH,CAbM;AAeP,OAAO,MAAME,MAAM,GAAG,MAAM;EACxB,OAAOP,QAAQ,IAAI;IACfE,YAAY,CAACM,KAAb;IACAjB,GAAG,CAACI,QAAJ,CAAa,IAAb;IACAK,QAAQ,CAACR,cAAc,CAAC,EAAD,CAAf,CAAR;IACAQ,QAAQ,CAACX,WAAW,EAAZ,CAAR;EACH,CALD;AAMH,CAPM"},"metadata":{},"sourceType":"module"}